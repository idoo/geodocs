%li{ :id => "#{node.send(opts[:id])}_#{opts[:klass]}", :'data-depth' => node.depth }
  = raw render(:partial => "#{opts[:path]}/link", :locals => {:opts => opts, :root => root, :node => node})
  = render(:partial => "#{opts[:path]}/children", :locals => {:opts => opts, :parent => node, :children => children}) unless children.blank?